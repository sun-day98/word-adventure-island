/**
 * AI拆书仿写示例模板
 * 提供丰富的示例数据供用户参考和学习
 */

class AIExamples {
    constructor() {
        this.deconstructionExamples = this.initDeconstructionExamples();
        this.imitationExamples = this.initImitationExamples();
        this.styleShowcases = this.initStyleShowcases();
    }

    /**
     * 初始化拆书示例
     */
    initDeconstructionExamples() {
        return {
            'chinese_novel': {
                title: '《围城》拆解示例',
                content: `婚姻是一座围城，城外的人想进去，城里的人想出来。婚姻这座围城围住了人的情欲、虚荣心和贪婪，让本来相爱的人在婚姻中互相折磨，失去自我。

方鸿渐从欧洲留学归来，满怀着对未来的憧憬和对知识的骄傲。然而在现实中，他遇到了苏文纨，一个外表美丽却内心复杂的女性。两人的相亲过程充满了讽刺和尴尬，预示着他们未来婚姻的不幸。

婚姻开始后，方鸿渐发现生活并非他想象的那样美好。他的工作平庸，收入微薄，而苏文纨却要求过高，两人的价值观和生活习惯完全不同。在家庭中，他感到压抑和无力，昔日的理想主义被现实击得粉碎。

钱钟书通过方鸿渐的遭遇，揭示了知识分子在婚姻和社会中的困境。婚姻中的每个人都有自己的围城，既要面对外部社会的压力，又要处理内部情感的纠葛。真正的智慧不在于如何进入或离开围城，而在于如何在围城中保持内心的自由和尊严。`,
                analysis: {
                    structure: {
                        outline: ['引入围城隐喻', '主角登场与相亲', '婚姻现实揭示', '社会困境反思'],
                        chapters: 3,
                        coherence: 0.9
                    },
                    keyPoints: {
                        central: [
                            { title: '围城隐喻', description: '婚姻如同围城，内外都有人想进出' },
                            { title: '理想与现实', description: '知识分子理想主义在现实中的破灭' },
                            { title: '婚姻困境', description: '婚姻中的个人压抑与自我迷失' }
                        ],
                        practical: [
                            { title: '婚姻选择', application: '在选择伴侣时要考虑价值观匹配' },
                            { title: '现实适应', application: '学会在现实中保持理想与现实的平衡' }
                        ]
                    },
                    writingTechniques: {
                        overall: {
                            style: '讽刺现实主义',
                            clarity: 9.2,
                            engagement: 8.8
                        }
                    },
                    valueAssessment: {
                        intellectual: 9.5,
                        practical: 8.0,
                        overall: '这是中国现代文学的杰作，深刻揭示了知识分子的生存困境'
                    }
                }
            },
            'business_book': {
                title: '《从优秀到卓越》拆解示例',
                content: `为什么有些公司能够实现从优秀到卓越的跨越，而另一些公司却不能？吉姆·柯林斯和他的研究团队花了五年时间，研究了从1965年到1995年30年中出现在《财富》500强榜单上的1435家公司。

研究发现，实现跨越的公司并不是那些最引人注目的公司，而是那些坚持简单而持久原则的公司。这些原则包括：培养第五级领导人、先人后事、直面残酷的现实、刺猬理念、训练有素的文化和技术加速器。

第五级领导人不是那些英雄式的个人，而是那些谦逊的个人意志与专业意志相结合的领导者。他们把公司的成功归功于运气而不是自己的能力，当公司遇到困难时，他们会承担责任而不是找借口。这种领导风格能够建立持久的文化和价值观。

先人后事意味着在决定战略方向之前，首先要找到合适的人。有了合适的人，公司的愿景和战略自然就会变得清晰。优秀公司强调"谁"比"什么"更重要，因为他们相信合适的人能够解决任何问题。`,
                analysis: {
                    structure: {
                        outline: ['问题提出', '研究方法', '核心原则', '领导力分析', '人才理念'],
                        chapters: 5,
                        coherence: 0.85
                    },
                    keyPoints: {
                        central: [
                            { title: '第五级领导', description: '谦逊的个人意志与专业意志相结合的领导者' },
                            { title: '先人后事', description: '合适的人比正确的方向更重要' },
                            { title: '刺猬理念', description: '找到简单但深刻的核心理念' }
                        ],
                        practical: [
                            { title: '领导力培养', application: '培养谦逊但坚定的领导风格' },
                            { title: '人才管理', application: '优先招聘合适的人，然后制定战略' }
                        ]
                    },
                    writingTechniques: {
                        overall: {
                            style: '商业分析',
                            clarity: 8.5,
                            engagement: 7.8
                        }
                    },
                    valueAssessment: {
                        intellectual: 8.0,
                        practical: 9.2,
                        overall: '这是一本非常有价值的商业管理书籍，提供了实用的管理智慧'
                    }
                }
            }
        };
    }

    /**
     * 初始化仿写示例
     */
    initImitationExamples() {
        return {
            'luxun_example': {
                original: '春天来了，花园里的花都开了，很美丽。我觉得这样的景色让人心情愉悦。',
                imitation: `春天到了，花园里的花竟相竞开放，煞是好看。我倒以为，这般景致，终究能叫人心里欢欣一些。

鲁迅的文字总是带着一丝冷峻的观察和对生活的深刻思考。即使在描写美景时，也不会一味地赞美，而是用"竟"、"煞是"、"终究"这些词，透露出一种理性的克制和对现实的清醒认识。`,
                styleAnalysis: {
                    characteristics: ['冷峻深刻', '社会洞察', '讽刺幽默', '白描手法'],
                    sentencePatterns: ['...，...。', '...；...。', '然而...'],
                    vocabulary: ['冷峻', '深刻', '讽刺', '隐喻', '象征'],
                    tone: '批判深刻'
                }
            },
            'ba_jin_example': {
                original: '今天天气很好，阳光明媚，我的心情也很愉快。我想出去走走，享受这美好的一天。',
                imitation: `啊！今天多好的天气啊，阳光是如此的明媚，我的内心也跟着欢欣起来！我想，我想出去走一走，去享受这美好的一天，让心灵也跟着自由地飞翔！

巴金的文字充满激情和理想主义的色彩。他喜欢用感叹句和重复来表达强烈的情感，"啊"、"多好的"、"如此的"这些词让文字充满力量感和澎湃的热情。即使在描写日常事物时，也能写出理想主义的光辉。`,
                styleAnalysis: {
                    characteristics: ['激情澎湃', '情感丰富', '直抒胸臆', '理想主义'],
                    sentencePatterns: ['啊...！', '我想...，我想...', '让...自由吧'],
                    vocabulary: ['激情', '理想', '自由', '光明', '未来'],
                    tone: '热情奔放'
                }
            },
            'wang_xiaobo_example': {
                original: '这个观点很有趣，值得我们深入思考。从逻辑上说，这样的分析是合理的。',
                imitation: `在我看来，这个观点相当有趣，至少在我看来是如此。从逻辑上讲，这样的分析确实有其道理，这很有趣。

王小波的文字总是带着理性的思辨和一丝幽默感。他喜欢用"在我看来"、"从逻辑上讲"、"这很有趣"这样的表达，既显示了他的独立思考，又保持了客观和谦虚的态度。即使在严肃的讨论中，也能保持轻松的语调。`,
                styleAnalysis: {
                    characteristics: ['理性思辨', '逻辑严密', '幽默讽刺', '独立思考'],
                    sentencePatterns: ['在我看来...', '...，这很有趣', '从逻辑上说...'],
                    vocabulary: ['理性', '逻辑', '思辨', '荒诞', '有趣'],
                    tone: '理性幽默'
                }
            },
            'xianxia_example': {
                original: '张三修行很努力，每天打坐冥想，希望早日突破境界。',
                imitation: `张三眼神一冷，心中暗道：这等凡俗之辈，怎知修仙之路的艰辛！他盘膝而坐，神识内敛，周身灵气涌动，隐隐有突破之兆！这一刻，他的气势陡然暴涨，令天地为之变色！

玄幻小说的语言风格充满了修仙的特色。"眼神一冷"、"心中暗道"、"神识内敛"、"灵气涌动"、"气势暴涨"等词汇营造了一个超凡脱俗的修仙世界。人物的语言和行为都带有一种超现实的色彩，让人感受到修仙者的与众不同。`,
                styleAnalysis: {
                    characteristics: ['修仙升级', '玄幻元素', '打斗场面', '等级体系', '逆袭成长'],
                    sentencePatterns: ['...眼神一冷', '...，不敢置信', '...，恐怖如斯'],
                    vocabulary: ['修为', '功法', '灵气', '境界', '神识'],
                    tone: '热血激昂'
                }
            }
        };
    }

    /**
     * 初始化风格展示
     */
    initStyleShowcases() {
        return {
            'literary_masters': {
                '鲁迅': {
                    characteristics: ['批判现实主义', '深刻的社会洞察', '讽刺幽默', '白描手法', '象征暗示'],
                    sentenceExample: '春天来了，桃花开了，我以为这很美，但转念一想，这也许只是我的一厢情愿罢了。',
                    vocabularyExample: '冷峻、深刻、讽刺、隐喻、象征',
                    usageTips: [
                        '多用理性分析，少用情感表达',
                        '常用反讽和对比手法',
                        '语言简洁有力，避免华丽辞藻',
                        '注重社会现象的批判性思考'
                    ]
                },
                '巴金': {
                    characteristics: ['激情澎湃', '情感丰富', '直抒胸臆', '理想主义', '人文关怀'],
                    sentenceExample: '啊！青春是多么美好！我想让所有的年轻人都能够自由地追求理想，让他们的心灵如同蓝天一样纯净。',
                    vocabularyExample: '激情、理想、自由、光明、未来',
                    usageTips: [
                        '多用感叹句和反问句',
                        '情感表达要直接而强烈',
                        '理想主义色彩要浓厚',
                        '关注人性的光明面'
                    ]
                },
                '茅盾': {
                    characteristics: ['宏大叙事', '历史背景', '人物群像', '社会画卷', '现实主义'],
                    sentenceExample: '在那个风云变幻的年代，历史的洪流裹挟着无数人的命运，每个人都在时代的浪潮中寻找自己的位置。',
                    vocabularyExample: '时代、历史、社会、命运、变革',
                    usageTips: [
                        '注重时代背景的描绘',
                        '人物群像要立体丰满',
                        '社会现实的反映要深刻',
                        '语言要有厚重感'
                    ]
                },
                '沈从文': {
                    characteristics: ['诗意语言', '田园风光', '纯真美好', '细腻情感', '自然意象'],
                    sentenceExample: '月光如水，静静地洒在小河上，远山如黛，近树如墨，姑娘的笑声如银铃般在夜色中回荡。',
                    vocabularyExample: '清澈、纯真、温柔、诗意、自然',
                    usageTips: [
                        '多用自然景物描写',
                        '语言要诗意优美',
                        '情感表达要细腻含蓄',
                        '营造纯真美好的氛围'
                    ]
                }
            },
            'modern_writers': {
                '王小波': {
                    characteristics: ['理性思辨', '逻辑严密', '幽默讽刺', '独立思考', '知识分子视角'],
                    sentenceExample: '从逻辑上说，这个观点是有问题的，但在我看来，问题不在于观点本身，而在于我们为什么接受这种观点。',
                    vocabularyExample: '理性、逻辑、思辨、荒诞、有趣',
                    usageTips: [
                        '注重逻辑推理',
                        '保持客观理性的语调',
                        '适当运用幽默和讽刺',
                        '体现独立思考精神'
                    ]
                },
                '余华': {
                    characteristics: ['平实语言', '生活细节', '时代变迁', '小人物视角', '黑色幽默'],
                    sentenceExample: '那时候，我们都知道生活很苦，但苦中也有乐，就像这碗白米饭，虽然简单，却能填饱肚子。',
                    vocabularyExample: '平凡、生活、时代、命运、无奈',
                    usageTips: [
                        '语言要朴实无华',
                        '注重生活细节描写',
                        '体现时代变迁',
                        '小人物视角要真实'
                    ]
                },
                '莫言': {
                    characteristics: ['魔幻现实主义', '乡土气息', '原始生命力', '感官描写', '民间传说'],
                    sentenceExample: '红高粱在月光下摇曳，像是无数精灵在跳舞，爷爷说，这片土地有灵性，会记住每一个来过的人。',
                    vocabularyExample: '高粱、土地、野性、狂野、神秘',
                    usageTips: [
                        '结合魔幻与现实',
                        '营造乡土氛围',
                        '感官描写要丰富',
                        '融入民间传说元素'
                    ]
                }
            },
            'online_genres': {
                '玄幻修仙': {
                    characteristics: ['修仙升级', '玄幻元素', '打斗场面', '等级体系', '逆袭成长'],
                    sentenceExample: '他盘膝而坐，神识内敛，周身灵气涌动，隐隐有突破之兆！这一刻，他的气势陡然暴涨，令天地为之变色！',
                    vocabularyExample: '修为、功法、灵气、境界、神识',
                    usageTips: [
                        '多用修仙专业术语',
                        '描写要夸张有力',
                        '注重等级突破的描写',
                        '营造超凡脱俗的氛围'
                    ]
                },
                '都市情感': {
                    characteristics: ['都市情感', '职场斗争', '现代生活', '情感纠葛', '社会现实'],
                    sentenceExample: '她冷笑一声，心中暗道：这些豪门子弟，不过如此！但她不知道，命运的丝线已经开始编织。',
                    vocabularyExample: '总裁、职场、豪门、逆袭、情深',
                    usageTips: [
                        '现代都市背景设定',
                        '情感纠葛要复杂',
                        '职场元素要融入',
                        '社会现实反映'
                    ]
                },
                '历史穿越': {
                    characteristics: ['历史穿越', '权谋斗争', '宫廷政变', '军事征战', '政治智慧'],
                    sentenceExample: '大殿之上，皇帝龙颜大怒：'大胆！竟敢妄议朝政！'太子连忙跪禀：'父皇息怒，儿臣一片忠心！',
                    vocabularyExample: '陛下、臣子、江山、权谋、社稷',
                    usageTips: [
                        '古代语言风格',
                        '宫廷礼仪要准确',
                        '权谋斗争要精彩',
                        '历史背景要真实'
                    ]
                }
            },
            'professional_styles': {
                '学术论文': {
                    characteristics: ['严谨论证', '专业术语', '数据支撑', '逻辑清晰', '客观分析'],
                    sentenceExample: '研究表明，在控制组和实验组之间存在显著差异（p<0.05），这支持了我们的假设。具体而言，实验组的表现优于对照组23.5%。',
                    vocabularyExample: '分析、研究、数据、理论、结论',
                    usageTips: [
                        '语言要客观严谨',
                        '数据和引用要准确',
                        '逻辑结构要清晰',
                        '避免主观表达'
                    ]
                },
                '技术文档': {
                    characteristics: ['技术细节', '逻辑严密', '专业深度', '解决方案', '创新思维'],
                    sentenceExample: '该算法通过引入动态阈值机制，将时间复杂度从O(n²)优化到O(n log n)，显著提升了处理效率。',
                    vocabularyExample: '架构、算法、优化、实现、性能',
                    usageTips: [
                        '技术细节要准确',
                        '解决方案要具体',
                        '逻辑要严密',
                        '体现技术创新'
                    ]
                },
                '商业文案': {
                    characteristics: ['商业洞察', '市场分析', '战略思维', '价值创造', '结果导向'],
                    sentenceExample: '通过深入的市场分析和精准的用户洞察，我们的解决方案能够为客户创造显著的价值，实现ROI提升300%。',
                    vocabularyExample: '市场、战略、价值、增长、优化',
                    usageTips: [
                        '注重商业价值',
                        '数据支撑要充分',
                        '结果导向要明确',
                        '语言要有说服力'
                    ]
                }
            }
        };
    }

    /**
     * 获取拆书示例
     */
    getDeconstructionExample(type) {
        return this.deconstructionExamples[type] || this.deconstructionExamples['chinese_novel'];
    }

    /**
     * 获取仿写示例
     */
    getImitationExample(style) {
        return this.imitationExamples[style] || this.imitationExamples['luxun_example'];
    }

    /**
     * 获取风格展示
     */
    getStyleShowcase(category, style) {
        return this.styleShowcases[category]?.[style] || null;
    }

    /**
     * 获取所有风格列表
     */
    getAllStyles() {
        const styles = {};
        
        for (const [category, categoryStyles] of Object.entries(this.styleShowcases)) {
            styles[category] = Object.keys(categoryStyles);
        }
        
        return styles;
    }

    /**
     * 生成风格对比
     */
    generateStyleComparison(style1, style2) {
        const showcase1 = this.findStyleInShowcases(style1);
        const showcase2 = this.findStyleInShowcases(style2);
        
        if (!showcase1 || !showcase2) {
            return null;
        }

        return {
            style1: {
                name: style1,
                characteristics: showcase1.characteristics,
                example: showcase1.sentenceExample,
                vocabulary: showcase1.vocabularyExample
            },
            style2: {
                name: style2,
                characteristics: showcase2.characteristics,
                example: showcase2.sentenceExample,
                vocabulary: showcase2.vocabularyExample
            },
            comparison: {
                similarCharacteristics: this.findSimilarCharacteristics(showcase1.characteristics, showcase2.characteristics),
                differentCharacteristics: this.findDifferentCharacteristics(showcase1.characteristics, showcase2.characteristics),
                toneComparison: this.compareTones(showcase1, showcase2)
            }
        };
    }

    /**
     * 查找风格展示
     */
    findStyleInShowcases(styleName) {
        for (const [category, categoryStyles] of Object.entries(this.styleShowcases)) {
            if (categoryStyles[styleName]) {
                return categoryStyles[styleName];
            }
        }
        return null;
    }

    /**
     * 查找相似特征
     */
    findSimilarCharacteristics(chars1, chars2) {
        return chars1.filter(char => chars2.includes(char));
    }

    /**
     * 查找不同特征
     */
    findDifferentCharacteristics(chars1, chars2) {
        return [
            ...chars1.filter(char => !chars2.includes(char)),
            ...chars2.filter(char => !chars1.includes(char))
        ];
    }

    /**
     * 比较语调
     */
    compareTones(showcase1, showcase2) {
        const tone1 = this.extractToneFromCharacteristics(showcase1.characteristics);
        const tone2 = this.extractToneFromCharacteristics(showcase2.characteristics);
        
        return {
            style1: tone1,
            style2: tone2,
            compatibility: this.assessToneCompatibility(tone1, tone2)
        };
    }

    /**
     * 从特征中提取语调
     */
    extractToneFromCharacteristics(characteristics) {
        if (characteristics.includes('理性') || characteristics.includes('逻辑')) {
            return '理性客观';
        } else if (characteristics.includes('激情') || characteristics.includes('情感')) {
            return '情感丰富';
        } else if (characteristics.includes('批判') || characteristics.includes('讽刺')) {
            return '批判深刻';
        } else if (characteristics.includes('诗意') || characteristics.includes('美好')) {
            return '诗意优美';
        } else if (characteristics.includes('热血') || characteristics.includes('激昂')) {
            return '热血激昂';
        } else {
            return '中性平衡';
        }
    }

    /**
     * 评估语调兼容性
     */
    assessToneCompatibility(tone1, tone2) {
        const compatibility = {
            '理性客观': ['情感丰富', '理性客观', '中性平衡'],
            '情感丰富': ['情感丰富', '诗意优美', '中性平衡'],
            '批判深刻': ['批判深刻', '理性客观', '中性平衡'],
            '诗意优美': ['诗意优美', '情感丰富', '中性平衡'],
            '热血激昂': ['热血激昂', '情感丰富'],
            '中性平衡': ['中性平衡', '理性客观', '情感丰富']
        };
        
        return compatibility[tone1]?.includes(tone2) ? '高度兼容' : '可能冲突';
    }

    /**
     * 生成学习路径
     */
    generateLearningPath(targetStyle, currentLevel = 'beginner') {
        const showcase = this.findStyleInShowcases(targetStyle);
        if (!showcase) {
            return null;
        }

        const paths = {
            'beginner': {
                duration: '2-4周',
                steps: [
                    '阅读并理解该风格的代表作品',
                    '分析基本的句式和词汇特点',
                    '尝试简单的句子模仿练习',
                    '逐步增加段落的练习'
                ],
                focus: [
                    '掌握核心词汇',
                    '理解基本句式',
                    '培养语感'
                ]
            },
            'intermediate': {
                duration: '1-2个月',
                steps: [
                    '深入分析该风格的高级技巧',
                    '进行主题性写作练习',
                    '学习该风格的思想内涵',
                    '尝试创作完整的作品'
                ],
                focus: [
                    '掌握修辞手法',
                    '理解风格精髓',
                    '形成个人特色'
                ]
            },
            'advanced': {
                duration: '3-6个月',
                steps: [
                    '研究该风格的历史背景',
                    '分析该风格的社会意义',
                    '创新和发展该风格',
                    '形成独特的个人风格'
                ],
                focus: [
                    '深度理解和创新',
                    '形成个人风格',
                    '达到创作自由'
                ]
            }
        };

        const path = paths[currentLevel] || paths['beginner'];
        
        return {
            targetStyle: targetStyle,
            currentLevel: currentLevel,
            path: path,
            characteristics: showcase.characteristics,
            tips: showcase.usageTips
        };
    }

    /**
     * 生成练习素材
     */
    generatePracticeExercises(style, difficulty = 'medium', exerciseType = 'imitation') {
        const showcase = this.findStyleInShowcases(style);
        if (!showcase) {
            return null;
        }

        const exercises = {
            'beginner': {
                'sentence': `用${style}风格改写：今天天气很好，我心情愉快。`,
                'paragraph': `用${style}风格描写一段关于春天的景色，不少于50字。`,
                'dialogue': `用${style}风格写一段对话，内容是两个朋友讨论读书的好处。`
            },
            'intermediate': {
                'story': `用${style}风格写一个短篇故事，主题是"成长的烦恼"，不少于200字。`,
                'description': `用${style}风格描写一个人物的内心活动，不少于100字。`,
                'argument': `用${style}风格表达你对"科技发展"的看法，要有理有据。`
            },
            'advanced': {
                'creation': `用${style}风格创作一个完整的作品，主题自定，不少于500字。`,
                'analysis': `分析一篇${style}风格的作品，并写一篇模仿该风格的新作品。`,
                'innovation': `在保持${style}风格精髓的基础上，创新一种新的表达方式。`
            }
        };

        return {
            style: style,
            difficulty: difficulty,
            exerciseType: exerciseType,
            exercise: exercises[difficulty]?.[exerciseType] || exercises['beginner']['sentence'],
            reference: showcase.sentenceExample,
            vocabulary: showcase.vocabularyExample,
            tips: showcase.usageTips
        };
    }

    /**
     * 生成风格测试
     */
    generateStyleTest(text, targetStyle) {
        const showcase = this.findStyleInShowcases(targetStyle);
        if (!showcase) {
            return null;
        }

        const test = {
            vocabulary: this.testVocabulary(text, showcase.vocabularyExample),
            sentencePattern: this.testSentencePattern(text, showcase.characteristics),
            tone: this.testTone(text, showcase.tone || ''),
            overall: 0
        };

        test.overall = (test.vocabulary + test.sentencePattern + test.tone) / 3;

        return {
            text: text,
            targetStyle: targetStyle,
            test: test,
            feedback: this.generateFeedback(test, showcase),
            suggestions: this.generateImprovementSuggestions(test, showcase)
        };
    }

    /**
     * 测试词汇匹配度
     */
    testVocabulary(text, targetVocabulary) {
        const targetWords = targetVocabulary.split('、');
        let matchCount = 0;
        
        targetWords.forEach(word => {
            if (text.includes(word)) {
                matchCount++;
            }
        });
        
        return Math.min(1, matchCount / targetWords.length);
    }

    /**
     * 测试句式模式
     */
    testSentencePattern(text, targetCharacteristics) {
        // 简化的句式测试
        let score = 0.5; // 基础分
        
        if (targetCharacteristics.includes('理性') && text.includes('从逻辑上')) {
            score += 0.3;
        }
        if (targetCharacteristics.includes('激情') && text.includes('啊')) {
            score += 0.3;
        }
        if (targetCharacteristics.includes('讽刺') && text.includes('看似')) {
            score += 0.3;
        }
        
        return Math.min(1, score);
    }

    /**
     * 测试语调匹配度
     */
    testTone(text, targetTone) {
        // 简化的语调测试
        let score = 0.5; // 基础分
        
        if (targetTone.includes('理性') && text.match(/从.*上说|在我看来|逻辑上/)) {
            score += 0.3;
        }
        if (targetTone.includes('激情') && text.match(/啊|!|！/)) {
            score += 0.3;
        }
        if (targetTone.includes('深刻') && text.match(/深刻|本质|根本/)) {
            score += 0.3;
        }
        
        return Math.min(1, score);
    }

    /**
     * 生成反馈
     */
    generateFeedback(test, showcase) {
        let feedback = '';
        
        if (test.overall >= 0.8) {
            feedback = '优秀！你很好地掌握了这种风格的精髓。';
        } else if (test.overall >= 0.6) {
            feedback = '良好！你已经掌握了这种风格的基本特点。';
        } else if (test.overall >= 0.4) {
            feedback = '及格！你对这种风格有一定的了解，但还需要练习。';
        } else {
            feedback = '需要改进！建议多学习该风格的代表作品。';
        }
        
        feedback += `具体得分：词汇${Math.round(test.vocabulary * 100)}%，句式${Math.round(test.sentencePattern * 100)}%，语调${Math.round(test.tone * 100)}%。`;
        
        return feedback;
    }

    /**
     * 生成改进建议
     */
    generateImprovementSuggestions(test, showcase) {
        const suggestions = [];
        
        if (test.vocabulary < 0.6) {
            suggestions.push(`建议多学习和使用该风格的核心词汇，如：${showcase.vocabularyExample}`);
        }
        
        if (test.sentencePattern < 0.6) {
            suggestions.push('建议模仿该风格的典型句式和表达方式');
        }
        
        if (test.tone < 0.6) {
            suggestions.push('建议调整语调，更好地体现该风格的情感特色');
        }
        
        if (showcase.usageTips && showcase.usageTips.length > 0) {
            suggestions.push(`参考学习要点：${showcase.usageTips.slice(0, 2).join('、')}`);
        }
        
        return suggestions;
    }
}

// 全局实例
window.aiExamples = new AIExamples();

// 导出类供其他模块使用
if (typeof module !== 'undefined' && module.exports) {
    module.exports = AIExamples;
}
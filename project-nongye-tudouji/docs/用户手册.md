# 农业巡检机器人用户手册

## 目录

1. [产品概述](#1-产品概述)
2. [快速开始](#2-快速开始)
3. [系统安装](#3-系统安装)
4. [功能介绍](#4-功能介绍)
5. [操作指南](#5-操作指南)
6. [维护保养](#6-维护保养)
7. [故障排除](#7-故障排除)
8. [技术支持](#8-技术支持)

---

## 1. 产品概述

### 1.1 产品简介

农业巡检机器人是一个集成了人工智能、机器人技术和农业科技的综合解决方案，旨在实现农业生产的自动化和智能化。

### 1.2 核心功能

- **智能巡检**: 基于YOLOv11的高精度目标检测
- **自主导航**: 多算法路径规划，适应复杂农田环境
- **精准作业**: 自动化灌溉、施肥、采摘等操作
- **数据管理**: 全面的数据采集、存储和分析
- **远程监控**: Web端实时监控和远程控制

### 1.3 技术特点

- **模块化设计**: 支持多种硬件配置和功能扩展
- **ROS2集成**: 标准化机器人通信和控制
- **云端协同**: 支持多机器人协同作业
- **开源架构**: 完全开源，支持二次开发

---

## 2. 快速开始

### 2.1 系统要求

#### 硬件要求
- **CPU**: Intel i5或同等性能
- **内存**: 最少4GB，推荐8GB
- **存储**: 最少50GB可用空间
- **网络**: 稳定的网络连接

#### 软件要求
- **操作系统**: Ubuntu 20.04+ / Windows 10+ / macOS 10.15+
- **Python**: 3.8+
- **Node.js**: 16+
- **浏览器**: Chrome 90+ / Firefox 88+ / Safari 14+

### 2.2 快速部署

1. **下载项目**
   ```bash
   git clone https://github.com/project-nongye-tudouji.git
   cd project-nongye-tudouji
   ```

2. **一键部署**
   ```bash
   chmod +x scripts/deploy/deploy.sh
   ./scripts/deploy/deploy.sh deploy
   ```

3. **访问系统**
   - Web管理界面: http://localhost:5000
   - 默认账号: admin/admin123

---

## 3. 系统安装

### 3.1 完整安装

#### 步骤1: 环境准备
```bash
# 安装Python依赖
pip install -r software/backend/requirements.txt

# 安装前端依赖
cd software/frontend
npm install
npm run build
cd ../..
```

#### 步骤2: 数据库初始化
```bash
# 初始化数据库
python3 software/backend/app.py --init-db
```

#### 步骤3: 启动服务
```bash
# 启动后端服务
python3 software/backend/app.py

# 启动前端服务（可选）
cd software/frontend
npm run serve
```

### 3.2 Docker部署

#### 使用Docker Compose
```bash
# 构建镜像
docker-compose build

# 启动服务
docker-compose up -d
```

#### 单独构建
```bash
# 后端服务
cd software/backend
docker build -t agricultural-robot-backend .

# 前端服务
cd software/frontend
docker build -t agricultural-robot-frontend .
```

### 3.3 ROS2环境配置

#### 安装ROS2
```bash
# Ubuntu 20.04 - Foxy
sudo apt update
sudo apt install ros-foxy-desktop

# Ubuntu 22.04 - Humble
sudo apt update
sudo apt install ros-humble-desktop
```

#### 配置ROS2工作空间
```bash
mkdir -p ~/agricultural_robot_ws/src
cd ~/agricultural_robot_ws
colcon build
source install/setup.bash
```

---

## 4. 功能介绍

### 4.1 控制台

**功能描述**: 系统总览和实时状态监控

**主要特性**:
- 机器人在线状态显示
- 任务执行情况统计
- 系统告警信息
- 性能指标监控

**使用方法**:
1. 登录系统后默认进入控制台
2. 查看实时数据和图表
3. 点击详细信息查看更多内容

### 4.2 机器人管理

#### 4.2.1 状态监控

**功能描述**: 实时监控机器人运行状态

**监控内容**:
- 位置信息 (X, Y, 角度)
- 运动状态和速度
- 电量和系统状态
- 传感器数据

#### 4.2.2 远程控制

**功能描述**: 远程控制机器人移动和作业

**控制方式**:
- **方向键控制**: 使用界面方向键控制移动
- **坐标导航**: 指定目标位置进行自主导航
- **路径规划**: 设置多个路径点进行巡检

#### 4.2.3 任务调度

**功能描述**: 管理和调度机器人任务

**任务类型**:
- **巡检任务**: 按预定路线进行区域巡检
- **灌溉任务**: 对指定区域进行自动灌溉
- **检测任务**: 执行目标检测和数据采集
- **采摘任务**: 执行果实采摘（需要机械臂）

### 4.3 目标检测

#### 4.3.1 实时检测

**功能描述**: 实时显示检测结果

**检测类别**:
- 作物类: 土豆、地瓜等
- 病害类: 病斑、虫害等
- 环境类: 干燥土壤、湿润土壤等

**界面操作**:
1. 选择机器人
2. 开启实时检测
3. 查看检测结果和统计

#### 4.3.2 历史记录

**功能描述**: 查看历史检测记录

**查询功能**:
- 按时间范围查询
- 按检测类别筛选
- 按机器人筛选
- 数据导出功能

#### 4.3.3 统计分析

**功能描述**: 检测数据的统计分析

**分析维度**:
- 检测数量趋势
- 类别分布统计
- 置信度分析
- 区域热力图

### 4.4 数据分析

#### 4.4.1 作物分析

**功能描述**: 作物生长和产量分析

**分析内容**:
- 生长趋势跟踪
- 产量预测
- 健康状态评估
- 收获时间预测

#### 4.4.2 环境数据

**功能描述**: 环境传感器数据分析

**监测参数**:
- 温度和湿度
- 土壤pH值
- 光照强度
- CO₂浓度

#### 4.4.3 性能统计

**功能描述**: 机器人性能和使用统计

**统计指标**:
- 工作时长统计
- 行驶里程统计
- 作业面积统计
- 故障率分析

---

## 5. 操作指南

### 5.1 日常操作流程

#### 5.1.1 系统启动

1. **检查硬件连接**
   - 确保机器人电源正常
   - 检查网络连接
   - 验证传感器状态

2. **启动系统服务**
   ```bash
   cd /path/to/project-nongye-tudouji
   ./scripts/deploy/deploy.sh start
   ```

3. **验证系统状态**
   - 访问Web界面: http://localhost:5000
   - 检查机器人在线状态
   - 查看系统健康检查

#### 5.1.2 机器人巡检

1. **创建巡检任务**
   - 进入"任务管理"页面
   - 点击"新建任务"
   - 选择"巡检任务"
   - 设置巡检路线和参数

2. **启动巡检**
   - 选择机器人执行任务
   - 监控任务执行状态
   - 查看实时检测结果

3. **查看结果**
   - 任务完成后查看检测报告
   - 分析检测统计数据
   - 导出检测结果

#### 5.1.3 精准作业

1. **识别作业区域**
   - 查看检测热力图
   - 识别需要作业的区域
   - 确认作业目标

2. **创建作业任务**
   - 选择作业类型（灌溉、施肥等）
   - 设置作业参数
   - 指定目标区域

3. **执行作业**
   - 启动机器人移动到目标位置
   - 执行精准作业操作
   - 监控作业过程

### 5.2 高级功能

#### 5.2.1 多机器人协同

1. **配置机器人集群**
   - 添加多个机器人到系统
   - 设置机器人参数和能力
   - 配置通信协议

2. **任务分配**
   - 创建复杂任务
   - 系统自动分配任务
   - 监控协同执行过程

3. **冲突避免**
   - 系统自动检测路径冲突
   - 动态调整任务执行顺序
   - 确保安全高效作业

#### 5.2.2 自定义配置

1. **检测模型配置**
   - 上传自定义训练模型
   - 设置检测参数
   - 调整置信度阈值

2. **路径规划配置**
   - 选择路径规划算法
   - 设置地图参数
   - 配置安全区域

3. **作业参数配置**
   - 设置灌溉参数
   - 配置施肥量
   - 调整作业速度

---

## 6. 维护保养

### 6.1 日常维护

#### 6.1.1 硬件维护

**机器人本体**:
- 每日检查轮子和履带磨损情况
- 清洁传感器镜头和表面
- 检查电池电量和连接状态
- 确保天线和GPS接收器正常

**传感器设备**:
- 定期校准摄像头
- 检查GPS信号质量
- 验证环境传感器读数
- 测试通信设备状态

#### 6.1.2 软件维护

**系统更新**:
- 定期检查系统更新
- 备份重要数据
- 清理日志文件
- 监控磁盘空间使用

**性能优化**:
- 监控系统资源使用
- 优化数据库性能
- 清理临时文件
- 检查网络连接质量

### 6.2 定期维护

#### 6.2.1 周维护

- 检查机械部件润滑情况
- 校准传感器精度
- 更新检测模型
- 备份配置文件

#### 6.2.2 月维护

- 深度清洁机器人本体
- 检查电池健康状况
- 更新系统软件
- 分析性能数据

#### 6.2.3 季度维护

- 全面检查机械系统
- 更换磨损部件
- 重新校准系统
- 制定维护计划

### 6.3 数据管理

#### 6.3.1 数据备份

**自动备份**:
```bash
# 系统自动备份数据
./scripts/deploy/deploy.sh backup
```

**手动备份**:
- 导出重要数据文件
- 备份配置文件
- 保存模型文件
- 记录系统状态

#### 6.3.2 数据清理

**日志清理**:
- 定期清理旧日志文件
- 压缩历史日志
- 删除临时文件

**数据归档**:
- 归档历史检测数据
- 压缩存储旧数据
- 建立数据索引

---

## 7. 故障排除

### 7.1 常见问题

#### 7.1.1 连接问题

**问题**: 无法连接到机器人
**可能原因**:
- 网络连接问题
- 机器人电源关闭
- 防火墙阻止连接
- IP地址配置错误

**解决方法**:
1. 检查网络连接状态
2. 确认机器人电源正常
3. 检查防火墙设置
4. 验证IP地址配置

#### 7.1.2 检测问题

**问题**: 检测精度低或检测失败
**可能原因**:
- 模型文件损坏
- 摄像头参数错误
- 光线条件不佳
- 算法参数设置不当

**解决方法**:
1. 重新下载模型文件
2. 检查摄像头配置
3. 调整光线条件
4. 优化检测参数

#### 7.1.3 导航问题

**问题**: 机器人无法正常导航
**可能原因**:
- 地图数据不准确
- 路径规划算法错误
- 传感器读数异常
- 机械部件故障

**解决方法**:
1. 重新构建地图
2. 检查规划算法参数
3. 校准传感器
4. 检查机械部件

### 7.2 错误代码

| 错误代码 | 描述 | 解决方法 |
|---------|------|----------|
| E001 | 数据库连接失败 | 检查数据库服务状态 |
| E002 | 模型加载失败 | 重新下载模型文件 |
| E003 | 传感器通信失败 | 检查硬件连接 |
| E004 | 导航计算失败 | 重新规划路径 |
| E005 | 内存不足 | 增加系统内存 |

### 7.3 日志分析

#### 7.3.1 查看日志

```bash
# 查看系统日志
tail -f logs/agricultural_robot.log

# 查看错误日志
grep ERROR logs/agricultural_robot.log

# 查看特定服务日志
tail -f logs/backend.log
tail -f logs/ros2.log
```

#### 7.3.2 日志级别

- **DEBUG**: 详细的调试信息
- **INFO**: 一般信息记录
- **WARN**: 警告信息
- **ERROR**: 错误信息
- **FATAL**: 致命错误

---

## 8. 技术支持

### 8.1 联系方式

- **技术支持邮箱**: tech-support@agricultural-robot.com
- **用户交流群**: QQ群号: 123456789
- **GitHub问题**: https://github.com/project-nongye-tudouji/issues
- **官方网站**: https://www.agricultural-robot.com

### 8.2 支持时间

- **工作日**: 周一至周五 9:00-18:00
- **紧急支持**: 7×24小时（付费用户）
- **响应时间**: 4小时内响应，24小时内解决

### 8.3 培训服务

提供专业的培训服务：
- **基础操作培训**: 1天
- **高级功能培训**: 2天
- **技术开发培训**: 3天
- **运维管理培训**: 2天

### 8.4 文档资源

- **在线文档**: https://docs.agricultural-robot.com
- **视频教程**: https://video.agricultural-robot.com
- **API文档**: https://api-docs.agricultural-robot.com
- **开发指南**: https://dev.agricultural-robot.com

---

## 附录

### A. 配置文件说明

详细配置文件说明请参考：[配置文档](../config/software/config.yaml)

### B. API接口文档

完整API接口文档请参考：[API文档](API文档.md)

### C. 开发者指南

开发者二次开发指南请参考：[开发者文档](开发者指南.md)

### D. 版本更新日志

版本更新记录请参考：[更新日志](CHANGELOG.md)

---

**文档版本**: v1.0.0  
**更新日期**: 2024年12月5日  
**适用版本**: v1.0.0+
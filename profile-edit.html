<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitLife - ç¼–è¾‘èµ„æ–™</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="page-container">
        <!-- é¡µé¢å¤´éƒ¨ -->
        <header class="page-header">
            <button class="back-btn" onclick="parent.navigateToPage('profile.html')">â† è¿”å›</button>
            <h1>ç¼–è¾‘èµ„æ–™</h1>
            <button class="save-btn" onclick="saveProfile()">ä¿å­˜</button>
        </header>

        <!-- å¤´åƒç¼–è¾‘ -->
        <section class="avatar-section">
            <div class="avatar-container">
                <img src="assets/images/ui/avatar-default.png" alt="ç”¨æˆ·å¤´åƒ" class="edit-avatar">
                <button class="change-avatar-btn" onclick="changeAvatar()">
                    <span>ğŸ“·</span>
                    <span>æ›´æ¢å¤´åƒ</span>
                </button>
            </div>
        </section>

        <!-- åŸºæœ¬ä¿¡æ¯ -->
        <section class="basic-info-section">
            <h2>åŸºæœ¬ä¿¡æ¯</h2>
            <form id="profile-form" class="edit-form">
                <div class="form-group">
                    <label for="nickname">æ˜µç§°</label>
                    <input type="text" id="nickname" name="nickname" value="Alex Chen" class="form-input">
                </div>

                <div class="form-group">
                    <label for="gender">æ€§åˆ«</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="gender" value="male" checked>
                            <span class="radio-custom"></span>
                            <span>ç”·</span>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="gender" value="female">
                            <span class="radio-custom"></span>
                            <span>å¥³</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="birthday">ç”Ÿæ—¥</label>
                    <input type="date" id="birthday" name="birthday" value="1995-06-15" class="form-input">
                </div>

                <div class="form-group">
                    <label for="height">èº«é«˜ (cm)</label>
                    <input type="number" id="height" name="height" value="175" min="100" max="250" class="form-input">
                </div>

                <div class="form-group">
                    <label for="weight">ä½“é‡ (kg)</label>
                    <input type="number" id="weight" name="weight" value="68" min="30" max="200" step="0.1" class="form-input">
                </div>

                <div class="form-group">
                    <label for="goal-weight">ç›®æ ‡ä½“é‡ (kg)</label>
                    <input type="number" id="goal-weight" name="goalWeight" value="65" min="30" max="200" step="0.1" class="form-input">
                </div>

                <div class="form-group">
                    <label for="activity-level">æ´»åŠ¨æ°´å¹³</label>
                    <select id="activity-level" name="activityLevel" class="form-select">
                        <option value="sedentary">ä¹…åå°‘åŠ¨</option>
                        <option value="light" selected>è½»åº¦æ´»åŠ¨</option>
                        <option value="moderate">ä¸­åº¦æ´»åŠ¨</option>
                        <option value="active">é«˜åº¦æ´»åŠ¨</option>
                        <option value="very-active">æåº¦æ´»åŠ¨</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="bio">ä¸ªäººç®€ä»‹</label>
                    <textarea id="bio" name="bio" placeholder="ä»‹ç»ä¸€ä¸‹è‡ªå·±ï¼Œåˆ†äº«ä½ çš„å¥èº«ç†å¿µ..." class="form-textarea">å¥èº«çˆ±å¥½è€… | åšæŒå°±æ˜¯èƒœåˆ© ğŸ’ª</textarea>
                </div>
            </form>
        </section>

        <!-- å¥èº«ç›®æ ‡ -->
        <section class="fitness-goals-section">
            <h2>å¥èº«ç›®æ ‡</h2>
            <div class="goals-grid">
                <div class="goal-item">
                    <label class="checkbox-label">
                        <input type="checkbox" name="goals" value="weight-loss" checked>
                        <span class="checkbox-custom"></span>
                        <span>å‡è„‚ç˜¦èº«</span>
                    </label>
                </div>
                <div class="goal-item">
                    <label class="checkbox-label">
                        <input type="checkbox" name="goals" value="muscle-gain" checked>
                        <span class="checkbox-custom"></span>
                        <span>å¢è‚Œå¡‘å½¢</span>
                    </label>
                </div>
                <div class="goal-item">
                    <label class="checkbox-label">
                        <input type="checkbox" name="goals" value="endurance">
                        <span class="checkbox-custom"></span>
                        <span>æå‡è€åŠ›</span>
                    </label>
                </div>
                <div class="goal-item">
                    <label class="checkbox-label">
                        <input type="checkbox" name="goals" value="flexibility" checked>
                        <span class="checkbox-custom"></span>
                        <span>å¢å¼ºæŸ”éŸ§</span>
                    </label>
                </div>
                <div class="goal-item">
                    <label class="checkbox-label">
                        <input type="checkbox" name="goals" value="health">
                        <span class="checkbox-custom"></span>
                        <span>ä¿æŒå¥åº·</span>
                    </label>
                </div>
                <div class="goal-item">
                    <label class="checkbox-label">
                        <input type="checkbox" name="goals" value="stress-relief">
                        <span class="checkbox-custom"></span>
                        <span>ç¼“è§£å‹åŠ›</span>
                    </label>
                </div>
            </div>
        </section>

        <!-- é¥®é£Ÿåå¥½ -->
        <section class="diet-preferences-section">
            <h2>é¥®é£Ÿåå¥½</h2>
            <div class="diet-options">
                <div class="diet-item">
                    <label class="radio-label">
                        <input type="radio" name="diet-type" value="omnivore" checked>
                        <span class="radio-custom"></span>
                        <span>å‡è¡¡é¥®é£Ÿ</span>
                    </label>
                </div>
                <div class="diet-item">
                    <label class="radio-label">
                        <input type="radio" name="diet-type" value="vegetarian">
                        <span class="radio-custom"></span>
                        <span>ç´ é£Ÿä¸»ä¹‰</span>
                    </label>
                </div>
                <div class="diet-item">
                    <label class="radio-label">
                        <input type="radio" name="diet-type" value="vegan">
                        <span class="radio-custom"></span>
                        <span>çº¯ç´ é£Ÿ</span>
                    </label>
                </div>
                <div class="diet-item">
                    <label class="radio-label">
                        <input type="radio" name="diet-type" value="keto">
                        <span class="radio-custom"></span>
                        <span>ç”Ÿé…®é¥®é£Ÿ</span>
                    </label>
                </div>
            </div>

            <div class="allergies-section">
                <h3>è¿‡æ•æºï¼ˆå¯å¤šé€‰ï¼‰</h3>
                <div class="allergies-grid">
                    <div class="allergy-item">
                        <label class="checkbox-label">
                            <input type="checkbox" name="allergies" value="nuts">
                            <span class="checkbox-custom"></span>
                            <span>åšæœ</span>
                        </label>
                    </div>
                    <div class="allergy-item">
                        <label class="checkbox-label">
                            <input type="checkbox" name="allergies" value="seafood">
                            <span class="checkbox-custom"></span>
                            <span>æµ·é²œ</span>
                        </label>
                    </div>
                    <div class="allergy-item">
                        <label class="checkbox-label">
                            <input type="checkbox" name="allergies" value="dairy">
                            <span class="checkbox-custom"></span>
                            <span>ä¹³åˆ¶å“</span>
                        </label>
                    </div>
                    <div class="allergy-item">
                        <label class="checkbox-label">
                            <input type="checkbox" name="allergies" value="eggs">
                            <span class="checkbox-custom"></span>
                            <span>é¸¡è›‹</span>
                        </label>
                    </div>
                    <div class="allergy-item">
                        <label class="checkbox-label">
                            <input type="checkbox" name="allergies" value="gluten">
                            <span class="checkbox-custom"></span>
                            <span>éº¸è´¨</span>
                        </label>
                    </div>
                </div>
            </div>
        </section>

        <!-- é€šçŸ¥è®¾ç½® -->
        <section class="notification-settings-section">
            <h2>é€šçŸ¥åå¥½</h2>
            <div class="notification-options">
                <div class="notification-item">
                    <div class="notification-info">
                        <h4>è®­ç»ƒæé†’</h4>
                        <p>æ¯æ—¥å®šæ—¶æé†’æ‚¨è¿›è¡Œè®­ç»ƒ</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="notification-item">
                    <div class="notification-info">
                        <h4>é¥®é£Ÿè®°å½•</h4>
                        <p>æé†’æ‚¨è®°å½•æ¯æ—¥é¥®é£Ÿ</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="notification-item">
                    <div class="notification-info">
                        <h4>é¥®æ°´æé†’</h4>
                        <p>å®šæ—¶æé†’è¡¥å……æ°´åˆ†</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="notification-item">
                    <div class="notification-info">
                        <h4>æˆå°±é€šçŸ¥</h4>
                        <p>è·å¾—æ–°æˆå°±æ—¶é€šçŸ¥</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </section>

        <!-- éšç§è®¾ç½® -->
        <section class="privacy-settings-section">
            <h2>éšç§è®¾ç½®</h2>
            <div class="privacy-options">
                <div class="privacy-item">
                    <div class="privacy-info">
                        <h4>å…¬å¼€ä¸ªäººèµ„æ–™</h4>
                        <p>å…¶ä»–ç”¨æˆ·å¯ä»¥æŸ¥çœ‹æ‚¨çš„åŸºæœ¬ä¿¡æ¯</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="privacy-item">
                    <div class="privacy-info">
                        <h4>å…¬å¼€è¿åŠ¨æ•°æ®</h4>
                        <p>å¥½å‹å¯ä»¥æŸ¥çœ‹æ‚¨çš„è¿åŠ¨è®°å½•</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="privacy-item">
                    <div class="privacy-info">
                        <h4>æ¥æ”¶å¥½å‹è¯·æ±‚</h4>
                        <p>å…è®¸å…¶ä»–ç”¨æˆ·å‘é€å¥½å‹è¯·æ±‚</p>
                    </div>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </section>
    </div>

    <!-- å¤´åƒé€‰æ‹©å¼¹çª— -->
    <div class="modal-overlay" id="avatar-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>æ›´æ¢å¤´åƒ</h3>
                <button class="close-btn" onclick="closeAvatarModal()">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="avatar-options">
                    <button class="avatar-option" onclick="takePhoto()">
                        <span class="avatar-option-icon">ğŸ“·</span>
                        <span>æ‹ç…§</span>
                    </button>
                    <button class="avatar-option" onclick="selectFromGallery()">
                        <span class="avatar-option-icon">ğŸ–¼ï¸</span>
                        <span>ä»ç›¸å†Œé€‰æ‹©</span>
                    </button>
                    <button class="avatar-option" onclick="useDefaultAvatar()">
                        <span class="avatar-option-icon">ğŸ‘¤</span>
                        <span>ä½¿ç”¨é»˜è®¤å¤´åƒ</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function saveProfile() {
            // æ”¶é›†è¡¨å•æ•°æ®
            const formData = {
                nickname: document.getElementById('nickname').value,
                gender: document.querySelector('input[name="gender"]:checked').value,
                birthday: document.getElementById('birthday').value,
                height: document.getElementById('height').value,
                weight: document.getElementById('weight').value,
                goalWeight: document.getElementById('goal-weight').value,
                activityLevel: document.getElementById('activity-level').value,
                bio: document.getElementById('bio').value,
                goals: Array.from(document.querySelectorAll('input[name="goals"]:checked')).map(cb => cb.value),
                dietType: document.querySelector('input[name="diet-type"]:checked').value,
                allergies: Array.from(document.querySelectorAll('input[name="allergies"]:checked')).map(cb => cb.value)
            };

            // éªŒè¯å¿…å¡«å­—æ®µ
            if (!formData.nickname.trim()) {
                alert('è¯·å¡«å†™æ˜µç§°');
                return;
            }

            if (!formData.height || formData.height < 100 || formData.height > 250) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„èº«é«˜');
                return;
            }

            if (!formData.weight || formData.weight < 30 || formData.weight > 200) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„ä½“é‡');
                return;
            }

            // æ¨¡æ‹Ÿä¿å­˜æ•°æ®
            console.log('ä¿å­˜ç”¨æˆ·èµ„æ–™:', formData);
            
            // æ˜¾ç¤ºä¿å­˜æˆåŠŸæç¤º
            const saveBtn = document.querySelector('.save-btn');
            const originalText = saveBtn.textContent;
            saveBtn.textContent = 'ä¿å­˜ä¸­...';
            saveBtn.disabled = true;

            setTimeout(() => {
                saveBtn.textContent = 'å·²ä¿å­˜';
                setTimeout(() => {
                    saveBtn.textContent = originalText;
                    saveBtn.disabled = false;
                    parent.navigateToPage('profile.html');
                }, 1000);
            }, 1000);
        }

        function changeAvatar() {
            document.getElementById('avatar-modal').style.display = 'block';
        }

        function closeAvatarModal() {
            document.getElementById('avatar-modal').style.display = 'none';
        }

        function takePhoto() {
            alert('æ‹ç…§åŠŸèƒ½ï¼šè¯·ä½¿ç”¨ç›¸æœºæ‹æ‘„å¤´åƒ');
            closeAvatarModal();
        }

        function selectFromGallery() {
            alert('ç›¸å†Œé€‰æ‹©ï¼šè¯·ä»ç›¸å†Œä¸­é€‰æ‹©å¤´åƒ');
            closeAvatarModal();
        }

        function useDefaultAvatar() {
            document.querySelector('.edit-avatar').src = 'assets/images/ui/avatar-default.png';
            closeAvatarModal();
        }

        // å®æ—¶è®¡ç®—BMI
        document.getElementById('height').addEventListener('input', calculateBMI);
        document.getElementById('weight').addEventListener('input', calculateBMI);

        function calculateBMI() {
            const height = parseFloat(document.getElementById('height').value);
            const weight = parseFloat(document.getElementById('weight').value);
            
            if (height && weight) {
                const heightInMeters = height / 100;
                const bmi = (weight / (heightInMeters * heightInMeters)).toFixed(1);
                
                // å¯ä»¥åœ¨è¿™é‡Œæ˜¾ç¤ºBMIä¿¡æ¯
                console.log('BMI:', bmi);
            }
        }

        // åˆå§‹åŒ–é¡µé¢æ—¶è®¡ç®—BMI
        calculateBMI();
    </script>
</body>
</html>
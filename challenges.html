<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŒ‘æˆ˜ä¸­å¿ƒ - å•è¯å†’é™©å²›</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/word-adventure.css">
</head>
<body>
    <div class="page-container challenges-page">
        <!-- é¡µé¢å¤´éƒ¨ -->
        <header class="page-header">
            <h1>ğŸ® æŒ‘æˆ˜ä¸­å¿ƒ</h1>
            <div class="challenge-badges">
                <span class="badge">è¿èƒœ: <span id="win-streak">0</span></span>
                <span class="badge">æ€»åˆ†: <span id="total-score">0</span></span>
            </div>
        </header>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <!-- æ¯æ—¥æŒ‘æˆ˜ -->
            <section class="daily-challenge-section">
                <div class="section-header">
                    <h2>ğŸ“… æ¯æ—¥æŒ‘æˆ˜</h2>
                    <button class="refresh-btn" onclick="refreshDailyChallenge()">ğŸ”„</button>
                </div>
                
                <div class="daily-challenge-card" id="daily-challenge">
                    <div class="challenge-header">
                        <div class="challenge-type">ä»Šæ—¥ä¸»é¢˜ï¼šåŠ¨ç‰©ä¸–ç•Œ</div>
                        <div class="challenge-time">å‰©ä½™æ—¶é—´: <span id="daily-time-left">23:45:30</span></div>
                    </div>
                    <div class="challenge-content">
                        <div class="challenge-description">
                            å®Œæˆ5ä¸ªå…³äºåŠ¨ç‰©çš„å•è¯æŒ‘æˆ˜ï¼Œè·å¾—åŒå€å¥–åŠ±ï¼
                        </div>
                        <div class="challenge-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="daily-progress" style="width: 0%"></div>
                            </div>
                            <span class="progress-text" id="daily-progress-text">0/5</span>
                        </div>
                        <div class="challenge-rewards">
                            <span class="reward-item">ğŸ’° 100</span>
                            <span class="reward-item">â­ 200 EXP</span>
                            <span class="reward-item">ğŸ ç¥ç§˜å®ç®±</span>
                        </div>
                    </div>
                    <button class="primary-btn" id="start-daily-btn" onclick="startDailyChallenge()">å¼€å§‹æŒ‘æˆ˜</button>
                </div>
            </section>

            <!-- æŒ‘æˆ˜æ¨¡å¼é€‰æ‹© -->
            <section class="challenge-modes">
                <h2>ğŸ¯ æŒ‘æˆ˜æ¨¡å¼</h2>
                <div class="modes-grid">
                    <div class="mode-card" onclick="startMode('pronunciation')">
                        <div class="mode-icon">ğŸ¤</div>
                        <h3>å‘éŸ³æŒ‘æˆ˜</h3>
                        <p>è·Ÿè¯»å•è¯ï¼Œæå‡å‘éŸ³å‡†ç¡®åº¦</p>
                        <div class="mode-difficulty">â­â­</div>
                    </div>
                    
                    <div class="mode-card" onclick="startMode('spelling')">
                        <div class="mode-icon">âœï¸</div>
                        <h3>æ‹¼å†™å¤§æˆ˜</h3>
                        <p>æ­£ç¡®æ‹¼å†™å•è¯ï¼Œå‡»è´¥æ•Œäºº</p>
                        <div class="mode-difficulty">â­â­â­</div>
                    </div>
                    
                    <div class="mode-card" onclick="startMode('matching')">
                        <div class="mode-icon">ğŸ¯</div>
                        <h3>å•è¯é…å¯¹</h3>
                        <p>è¿æ¥å•è¯ä¸é‡Šä¹‰ï¼Œè®­ç»ƒè®°å¿†</p>
                        <div class="mode-difficulty">â­â­</div>
                    </div>
                    
                    <div class="mode-card" onclick="startMode('sentence')">
                        <div class="mode-icon">ğŸ“</div>
                        <h3>å¥å­æ„å»º</h3>
                        <p>ç”¨å•è¯é€ å¥ï¼Œæå‡åº”ç”¨èƒ½åŠ›</p>
                        <div class="mode-difficulty">â­â­â­â­</div>
                    </div>
                    
                    <div class="mode-card" onclick="startMode('speed')">
                        <div class="mode-icon">âš¡</div>
                        <h3>æé€ŸæŒ‘æˆ˜</h3>
                        <p>é™æ—¶ç­”é¢˜ï¼Œè€ƒéªŒååº”é€Ÿåº¦</p>
                        <div class="mode-difficulty">â­â­â­â­â­</div>
                    </div>
                    
                    <div class="mode-card" onclick="startMode('master')">
                        <div class="mode-icon">ğŸ‘‘</div>
                        <h3>ç»¼åˆå¤§å¸ˆ</h3>
                        <p>å…¨æ–¹ä½æŒ‘æˆ˜ï¼Œæµ‹è¯•ç»¼åˆèƒ½åŠ›</p>
                        <div class="mode-difficulty">â­â­â­â­â­</div>
                    </div>
                </div>
            </section>

            <!-- æ’è¡Œæ¦œ -->
            <section class="leaderboard-section">
                <div class="section-header">
                    <h2>ğŸ† æ’è¡Œæ¦œ</h2>
                    <div class="leaderboard-tabs">
                        <button class="tab-btn active" data-type="daily" onclick="switchLeaderboard('daily')">ä»Šæ—¥</button>
                        <button class="tab-btn" data-type="weekly" onclick="switchLeaderboard('weekly')">æœ¬å‘¨</button>
                        <button class="tab-btn" data-type="all" onclick="switchLeaderboard('all')">æ€»æ¦œ</button>
                    </div>
                </div>
                
                <div class="leaderboard-list" id="leaderboard-list">
                    <!-- æ’è¡Œæ¦œå°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </section>

            <!-- æˆå°±å±•ç¤º -->
            <section class="achievements-section">
                <h2>ğŸ–ï¸ æœ€è¿‘æˆå°±</h2>
                <div class="achievements-grid" id="achievements-grid">
                    <!-- æˆå°±å°†åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </section>
        </main>
    </div>

    <!-- æŒ‘æˆ˜è®¾ç½®å¼¹çª— -->
    <div id="challenge-settings-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>æŒ‘æˆ˜è®¾ç½®</h3>
            <div class="setting-group">
                <label>éš¾åº¦ç­‰çº§</label>
                <select id="difficulty-select">
                    <option value="easy">ç®€å•</option>
                    <option value="normal" selected>æ™®é€š</option>
                    <option value="hard">å›°éš¾</option>
                    <option value="expert">ä¸“å®¶</option>
                </select>
            </div>
            <div class="setting-group">
                <label>å•è¯æ•°é‡</label>
                <select id="word-count-select">
                    <option value="5">5ä¸ªå•è¯</option>
                    <option value="10" selected>10ä¸ªå•è¯</option>
                    <option value="15">15ä¸ªå•è¯</option>
                    <option value="20">20ä¸ªå•è¯</option>
                </select>
            </div>
            <div class="setting-group">
                <label>æ—¶é—´é™åˆ¶</label>
                <select id="time-limit-select">
                    <option value="60">1åˆ†é’Ÿ</option>
                    <option value="120" selected>2åˆ†é’Ÿ</option>
                    <option value="180">3åˆ†é’Ÿ</option>
                    <option value="300">5åˆ†é’Ÿ</option>
                    <option value="0">æ— é™åˆ¶</option>
                </select>
            </div>
            <div class="modal-actions">
                <button class="secondary-btn" onclick="closeChallengeSettings()">å–æ¶ˆ</button>
                <button class="primary-btn" onclick="confirmChallengeSettings()">å¼€å§‹æŒ‘æˆ˜</button>
            </div>
        </div>
    </div>

    <script>
        // å½“å‰æŒ‘æˆ˜è®¾ç½®
        let currentChallengeMode = null;
        let challengeSettings = {
            difficulty: 'normal',
            wordCount: 10,
            timeLimit: 120
        };

        // ===== é¡µé¢åˆå§‹åŒ– =====
        document.addEventListener('DOMContentLoaded', function() {
            initializeChallenges();
        });

        function initializeChallenges() {
            console.log('åˆå§‹åŒ–æŒ‘æˆ˜é¡µé¢...');
            
            try {
                updateChallengeStats();
                loadDailyChallenge();
                loadLeaderboard('daily');
                loadRecentAchievements();
                startDailyChallengeTimer();
                
                console.log('æŒ‘æˆ˜é¡µé¢åˆå§‹åŒ–å®Œæˆ');
            } catch (error) {
                console.error('æŒ‘æˆ˜é¡µé¢åˆå§‹åŒ–å¤±è´¥:', error);
            }
        }

        // ===== æŒ‘æˆ˜ç»Ÿè®¡æ›´æ–° =====
        function updateChallengeStats() {
            // ç®€åŒ–çš„ç»Ÿè®¡æ•°æ®
            const winStreak = Math.floor(Math.random() * 10); // æ¨¡æ‹Ÿè¿èƒœæ•°æ®
            const totalScore = Math.floor(Math.random() * 5000); // æ¨¡æ‹Ÿæ€»åˆ†
            
            // æ›´æ–°æ˜¾ç¤º
            const streakElement = document.getElementById('win-streak');
            const scoreElement = document.getElementById('total-score');
            
            if (streakElement) {
                streakElement.textContent = winStreak;
            }
            
            if (scoreElement) {
                scoreElement.textContent = totalScore;
            }
        }
            
            document.getElementById('win-streak').textContent = winStreak;
            document.getElementById('total-score').textContent = totalScore;
        }

        // ===== æ¯æ—¥æŒ‘æˆ˜ =====
        function loadDailyChallenge() {
            const today = new Date().toDateString();
            const dailyData = localStorage.getItem(`daily_challenge_${today}`);
            
            if (dailyData) {
                const data = JSON.parse(dailyData);
                updateDailyChallengeProgress(data);
            } else {
                // ç”Ÿæˆæ–°çš„æ¯æ—¥æŒ‘æˆ˜
                generateDailyChallenge();
            }
        }

        function generateDailyChallenge() {
            // æ ¹æ®ä»Šæ—¥æ—¥æœŸç”Ÿæˆä¸»é¢˜å’Œå•è¯
            const themes = ['åŠ¨ç‰©ä¸–ç•Œ', 'æ°´æœä¹å›­', 'é¢œè‰²ç‹å›½', 'è¿åŠ¨ç«æŠ€', 'è‡ªç„¶é£å…‰'];
            const today = new Date().getDay();
            const theme = themes[today % themes.length];
            
            // éšæœºé€‰æ‹©ç›¸å…³å•è¯
            const themeWords = selectThemeWords(theme, 5);
            
            const dailyData = {
                theme: theme,
                words: themeWords,
                completed: 0,
                total: 5,
                timestamp: Date.now()
            };
            
            localStorage.setItem(`daily_challenge_${new Date().toDateString()}`, JSON.stringify(dailyData));
            updateDailyChallengeProgress(dailyData);
        }

        function selectThemeWords(theme, count) {
            // ç®€åŒ–å®ç°ï¼Œéšæœºé€‰æ‹©å•è¯
            const allWords = [];
            for (const difficulty in WordAdventureData.WordDatabase) {
                allWords.push(...WordAdventureData.WordDatabase[difficulty]);
            }
            
            const selected = [];
            const shuffled = allWords.sort(() => Math.random() - 0.5);
            
            for (let i = 0; i < count && i < shuffled.length; i++) {
                selected.push(shuffled[i].id);
            }
            
            return selected;
        }

        function updateDailyChallengeProgress(data) {
            const progress = (data.completed / data.total) * 100;
            
            document.querySelector('#daily-challenge .challenge-type').textContent = `ä»Šæ—¥ä¸»é¢˜ï¼š${data.theme}`;
            document.getElementById('daily-progress').style.width = `${progress}%`;
            document.getElementById('daily-progress-text').textContent = `${data.completed}/${data.total}`;
            
            if (data.completed >= data.total) {
                document.getElementById('start-daily-btn').textContent = 'å·²å®Œæˆ';
                document.getElementById('start-daily-btn').disabled = true;
            }
        }

        function startDailyChallenge() {
            const today = new Date().toDateString();
            const dailyData = JSON.parse(localStorage.getItem(`daily_challenge_${today}`) || '{}');
            
            if (dailyData.words && dailyData.words.length > 0) {
                // è·³è½¬åˆ°æŒ‘æˆ˜é¡µé¢
                const wordsParam = dailyData.words.join(',');
                if (window.parent && window.parent.NavigationManager) {
                    window.parent.NavigationManager.navigateToPage(`challenge.html?words=${wordsParam}&mode=daily`);
                }
            }
        }

        function refreshDailyChallenge() {
            if (confirm('ç¡®å®šè¦åˆ·æ–°æ¯æ—¥æŒ‘æˆ˜å—ï¼Ÿå½“å‰è¿›åº¦å°†ä¸¢å¤±ã€‚')) {
                generateDailyChallenge();
                WordAdventureUI.showToast('æ¯æ—¥æŒ‘æˆ˜å·²åˆ·æ–°', 'success');
            }
        }

        function startDailyChallengeTimer() {
            // è®¡ç®—åˆ°æ˜æ—¥åˆå¤œçš„å‰©ä½™æ—¶é—´
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            
            const timeDiff = tomorrow - now;
            
            setInterval(() => {
                const now = new Date();
                const timeLeft = tomorrow - now;
                
                if (timeLeft > 0) {
                    const hours = Math.floor(timeLeft / (1000 * 60 * 60));
                    const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                    
                    document.getElementById('daily-time-left').textContent = 
                        `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                } else {
                    // æ–°çš„ä¸€å¤©ï¼Œé‡æ–°ç”ŸæˆæŒ‘æˆ˜
                    generateDailyChallenge();
                    startDailyChallengeTimer();
                }
            }, 1000);
        }

        // ===== æŒ‘æˆ˜æ¨¡å¼ =====
        function startMode(mode) {
            currentChallengeMode = mode;
            showChallengeSettings();
        }

        function showChallengeSettings() {
            document.getElementById('challenge-settings-modal').style.display = 'flex';
            
            // æ ¹æ®æ¨¡å¼è°ƒæ•´é»˜è®¤è®¾ç½®
            switch (currentChallengeMode) {
                case 'pronunciation':
                    challengeSettings.wordCount = 8;
                    challengeSettings.timeLimit = 0; // æ— æ—¶é—´é™åˆ¶
                    break;
                case 'spelling':
                    challengeSettings.wordCount = 10;
                    challengeSettings.timeLimit = 180;
                    break;
                case 'speed':
                    challengeSettings.wordCount = 20;
                    challengeSettings.timeLimit = 60;
                    challengeSettings.difficulty = 'normal';
                    break;
                case 'master':
                    challengeSettings.wordCount = 15;
                    challengeSettings.timeLimit = 300;
                    challengeSettings.difficulty = 'hard';
                    break;
            }
            
            // æ›´æ–°è®¾ç½®ç•Œé¢
            document.getElementById('difficulty-select').value = challengeSettings.difficulty;
            document.getElementById('word-count-select').value = challengeSettings.wordCount;
            document.getElementById('time-limit-select').value = challengeSettings.timeLimit;
        }

        function closeChallengeSettings() {
            document.getElementById('challenge-settings-modal').style.display = 'none';
        }

        function confirmChallengeSettings() {
            challengeSettings.difficulty = document.getElementById('difficulty-select').value;
            challengeSettings.wordCount = parseInt(document.getElementById('word-count-select').value);
            challengeSettings.timeLimit = parseInt(document.getElementById('time-limit-select').value);
            
            closeChallengeSettings();
            
            // æ ¹æ®è®¾ç½®ç”ŸæˆæŒ‘æˆ˜å‚æ•°
            const params = new URLSearchParams({
                mode: currentChallengeMode,
                difficulty: challengeSettings.difficulty,
                count: challengeSettings.wordCount,
                time: challengeSettings.timeLimit
            });
            
            // è·³è½¬åˆ°æŒ‘æˆ˜é¡µé¢
            if (window.parent && window.parent.NavigationManager) {
                window.parent.NavigationManager.navigateToPage(`challenge.html?${params.toString()}`);
            }
        }

        // ===== æ’è¡Œæ¦œ =====
        function loadLeaderboard(type) {
            // æ¨¡æ‹Ÿæ’è¡Œæ¦œæ•°æ®
            const leaderboardData = generateLeaderboardData(type);
            renderLeaderboard(leaderboardData);
        }

        function generateLeaderboardData(type) {
            const names = ['å°æ˜', 'å°çº¢', 'å°å', 'å°ä¸½', 'å°å¼º', 'å°ç¾', 'å°å†›', 'å°èŠ³'];
            const data = [];
            
            // æ·»åŠ å½“å‰ç©å®¶
            const currentScore = WordAdventure.gameState.statistics.totalScore || 0;
            data.push({
                rank: 1,
                name: 'æˆ‘',
                score: currentScore,
                avatar: 'ğŸ‘¤',
                isPlayer: true
            });
            
            // æ·»åŠ å…¶ä»–ç©å®¶
            for (let i = 1; i < 10; i++) {
                data.push({
                    rank: i + 1,
                    name: names[i - 1],
                    score: Math.floor(Math.random() * 1000) + 100,
                    avatar: ['ğŸ˜€', 'ğŸ˜', 'ğŸ¤“', 'ğŸ˜Š', 'ğŸ¦„', 'ğŸ±', 'ğŸ¶', 'ğŸ¼'][i - 1],
                    isPlayer: false
                });
            }
            
            // æŒ‰åˆ†æ•°æ’åº
            data.sort((a, b) => b.score - a.score);
            
            // æ›´æ–°æ’å
            data.forEach((item, index) => {
                item.rank = index + 1;
            });
            
            return data;
        }

        function renderLeaderboard(data) {
            const leaderboardList = document.getElementById('leaderboard-list');
            
            let html = '';
            data.forEach((player, index) => {
                const medal = index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : `${player.rank}.`;
                
                html += `
                    <div class="leaderboard-item ${player.isPlayer ? 'current-player' : ''}">
                        <div class="player-rank">${medal}</div>
                        <div class="player-avatar">${player.avatar}</div>
                        <div class="player-info">
                            <div class="player-name">${player.name}</div>
                            <div class="player-score">${player.score} åˆ†</div>
                        </div>
                        ${player.isPlayer ? '<div class="player-badge">å½“å‰</div>' : ''}
                    </div>
                `;
            });
            
            leaderboardList.innerHTML = html;
        }

        function switchLeaderboard(type) {
            // æ›´æ–°æ ‡ç­¾çŠ¶æ€
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-type="${type}"]`).classList.add('active');
            
            loadLeaderboard(type);
        }

        // ===== æˆå°±ç³»ç»Ÿ =====
        function loadRecentAchievements() {
            const achievements = WordAdventure.gameState.player.unlocked.achievements;
            const recentAchievements = achievements.slice(-6).reverse();
            
            renderRecentAchievements(recentAchievements);
        }

        function renderRecentAchievements(achievementIds) {
            const grid = document.getElementById('achievements-grid');
            
            if (achievementIds.length === 0) {
                grid.innerHTML = '<div class="empty-achievements">æš‚æ— æˆå°±</div>';
                return;
            }
            
            let html = '';
            achievementIds.forEach(id => {
                const achievement = WordAdventureData.Achievements[id];
                if (achievement) {
                    html += `
                        <div class="achievement-item">
                            <div class="achievement-icon">${achievement.icon}</div>
                            <div class="achievement-name">${achievement.name}</div>
                        </div>
                    `;
                }
            });
            
            grid.innerHTML = html;
        }

        // ===== ç›‘å¬æ¸¸æˆäº‹ä»¶ =====
        function setupEventListeners() {
            WordAdventure.on('challengeCompleted', function() {
                updateChallengeStats();
                loadLeaderboard('daily');
                loadRecentAchievements();
            });
            
            WordAdventure.on('achievementUnlocked', function() {
                loadRecentAchievements();
            });
        }

        // ===== ç®€åŒ–çš„æŒ‘æˆ˜åŠŸèƒ½ =====
        function startMode(mode) {
            console.log(`å¼€å§‹æŒ‘æˆ˜æ¨¡å¼: ${mode}`);
            alert(`${mode}æ¨¡å¼å¼€å‘ä¸­ï¼Œå³å°†æ¨å‡ºï¼`);
        }
        
        function startDailyChallenge() {
            console.log('å¼€å§‹æ¯æ—¥æŒ‘æˆ˜');
            window.location.href = 'challenge.html';
        }
        
        function refreshDailyChallenge() {
            console.log('åˆ·æ–°æ¯æ—¥æŒ‘æˆ˜');
            loadDailyChallenge();
            showFloatingText('æ¯æ—¥æŒ‘æˆ˜å·²åˆ·æ–°ï¼', 'success');
        }
        
        function showFloatingText(text, type) {
            const floatingText = document.createElement('div');
            floatingText.className = `floating-text floating-${type}`;
            floatingText.textContent = text;
            
            floatingText.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 10px 20px;
                border-radius: 20px;
                z-index: 1000;
                font-size: 16px;
                animation: fadeInOut 2s ease-in-out;
            `;
            
            document.body.appendChild(floatingText);
            
            setTimeout(() => {
                if (floatingText.parentNode) {
                    floatingText.parentNode.removeChild(floatingText);
                }
            }, 2000);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè®¾ç½®äº‹ä»¶ç›‘å¬
        setTimeout(setupEventListeners, 1000);
    </script>
    
    <style>
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        }
    </style>

    <style>
        /* æŒ‘æˆ˜ä¸­å¿ƒé¡µé¢æ ·å¼ */
        .challenge-badges {
            display: flex;
            gap: 10px;
            font-size: 14px;
        }

        .badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 12px;
        }

        /* æ¯æ—¥æŒ‘æˆ˜ */
        .daily-challenge-section {
            margin: 16px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .section-header h2 {
            color: white;
            font-size: 18px;
        }

        .refresh-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 6px 10px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
        }

        .daily-challenge-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .challenge-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .challenge-type {
            font-weight: bold;
            color: #6A11CB;
            font-size: 16px;
        }

        .challenge-time {
            font-size: 12px;
            color: #666;
        }

        .challenge-description {
            color: #333;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .challenge-progress {
            margin-bottom: 15px;
        }

        .progress-text {
            font-size: 12px;
            color: #666;
            margin-top: 4px;
            display: block;
            text-align: right;
        }

        .challenge-rewards {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .reward-item {
            background: #f8f9fa;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        /* æŒ‘æˆ˜æ¨¡å¼ */
        .challenge-modes {
            margin: 16px;
        }

        .challenge-modes h2 {
            color: white;
            margin-bottom: 12px;
            font-size: 18px;
        }

        .modes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
        }

        .mode-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .mode-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        }

        .mode-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .mode-card h3 {
            font-size: 14px;
            margin-bottom: 6px;
            color: #333;
        }

        .mode-card p {
            font-size: 12px;
            color: #666;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .mode-difficulty {
            font-size: 12px;
            color: #FFA500;
        }

        /* æ’è¡Œæ¦œ */
        .leaderboard-section {
            margin: 16px;
        }

        .leaderboard-section h2 {
            color: white;
            margin-bottom: 12px;
            font-size: 18px;
        }

        .leaderboard-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .tab-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
        }

        .tab-btn.active {
            background: white;
            color: #6A11CB;
        }

        .leaderboard-list {
            background: white;
            border-radius: 12px;
            padding: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 4px;
            transition: background 0.2s ease;
        }

        .leaderboard-item:hover {
            background: #f8f9fa;
        }

        .leaderboard-item.current-player {
            background: linear-gradient(135deg, rgba(106, 17, 203, 0.1), rgba(37, 117, 252, 0.1));
            border: 1px solid #6A11CB;
        }

        .player-rank {
            font-weight: bold;
            color: #6A11CB;
            min-width: 30px;
            text-align: center;
        }

        .player-avatar {
            font-size: 24px;
        }

        .player-info {
            flex: 1;
        }

        .player-name {
            font-weight: 500;
            color: #333;
        }

        .player-score {
            font-size: 12px;
            color: #666;
        }

        .player-badge {
            background: #6A11CB;
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 8px;
        }

        /* æˆå°±å±•ç¤º */
        .achievements-section {
            margin: 16px;
        }

        .achievements-section h2 {
            color: white;
            margin-bottom: 12px;
            font-size: 18px;
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .achievement-item {
            background: white;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .achievement-icon {
            font-size: 24px;
            margin-bottom: 4px;
        }

        .achievement-name {
            font-size: 10px;
            color: #333;
            font-weight: 500;
        }

        .empty-achievements {
            background: white;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            color: #666;
            font-size: 14px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* æŒ‘æˆ˜è®¾ç½®å¼¹çª— */
        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 20px;
            max-width: 350px;
            margin: 20px;
        }

        .modal-content h3 {
            margin-bottom: 20px;
            color: #333;
        }

        .setting-group {
            margin-bottom: 16px;
        }

        .setting-group label {
            display: block;
            margin-bottom: 6px;
            color: #333;
            font-weight: 500;
        }

        .setting-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            font-size: 14px;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-actions button {
            flex: 1;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 375px) {
            .challenge-badges {
                flex-direction: column;
                gap: 4px;
            }
            
            .modes-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .achievements-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .challenge-rewards {
                flex-wrap: wrap;
            }
            
            .leaderboard-item {
                padding: 8px;
            }
            
            .player-avatar {
                font-size: 20px;
            }
        }

        @media (max-width: 320px) {
            .modes-grid {
                grid-template-columns: 1fr;
            }
            
            .achievements-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</body>
</html>
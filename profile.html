<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ªäººä¸­å¿ƒ - å•è¯å†’é™©å²›</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/ios-status-bar.css">
    <link rel="stylesheet" href="css/word-adventure.css">
    <link rel="icon" href="assets/images/icon.png" type="image/png">
</head>
<body>
    <div class="app-container profile-page">
        <!-- é¡µé¢å¤´éƒ¨ -->
        <header class="page-header">
            <button class="back-btn" onclick="history.back()">â†</button>
            <h1>ä¸ªäººä¸­å¿ƒ</h1>
        </header>

        <!-- ç©å®¶ä¿¡æ¯å¡ç‰‡ -->
        <section class="player-card">
            <div class="player-avatar-section">
                <img src="assets/images/avatars/feifei.png" alt="éœéœ" class="player-avatar-large">
                <div class="player-info">
                    <h2 class="player-name">å†’é™©è€…</h2>
                    <div class="player-level-display">
                        <span class="level-badge">Lv.<span id="player-level">1</span></span>
                        <div class="exp-bar">
                            <div class="exp-fill" id="exp-fill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç»Ÿè®¡æ•°æ® -->
        <section class="stats-section">
            <h3>å­¦ä¹ ç»Ÿè®¡</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">ğŸ“š</div>
                    <div class="stat-value" id="words-learned">0</div>
                    <div class="stat-label">å­¦ä¼šå•è¯</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ”¥</div>
                    <div class="stat-value" id="streak-days">0</div>
                    <div class="stat-label">è¿ç»­å¤©æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">â±ï¸</div>
                    <div class="stat-value" id="total-time">0</div>
                    <div class="stat-label">å­¦ä¹ åˆ†é’Ÿ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">ğŸ†</div>
                    <div class="stat-value" id="achievements">0</div>
                    <div class="stat-label">æˆå°±æ•°é‡</div>
                </div>
            </div>
        </section>

        <!-- æˆå°±å±•ç¤º -->
        <section class="achievements-section">
            <h3>æˆ‘çš„æˆå°±</h3>
            <div class="achievements-grid" id="achievements-grid">
                <!-- æˆå°±å°†åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </section>

        <!-- è®¾ç½®é€‰é¡¹ -->
        <section class="settings-section">
            <h3>è®¾ç½®</h3>
            <div class="settings-list">
                <div class="setting-item">
                    <label class="setting-label">
                        <span>ğŸ”Š éŸ³æ•ˆ</span>
                        <input type="checkbox" id="sound-toggle" checked>
                        <span class="toggle-switch"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <label class="setting-label">
                        <span>ğŸµ èƒŒæ™¯éŸ³ä¹</span>
                        <input type="checkbox" id="music-toggle" checked>
                        <span class="toggle-switch"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <label class="setting-label">
                        <span>ğŸ”” æé†’</span>
                        <input type="checkbox" id="notification-toggle" checked>
                        <span class="toggle-switch"></span>
                    </label>
                </div>
            </div>
        </section>

        <!-- å…¶ä»–é€‰é¡¹ -->
        <section class="options-section">
            <div class="options-list">
                <button class="option-btn" onclick="showParentMode()">
                    ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ å®¶é•¿æ¨¡å¼
                </button>
                <button class="option-btn" onclick="exportProgress()">
                    ğŸ“Š å¯¼å‡ºè¿›åº¦
                </button>
                <button class="option-btn" onclick="showAbout()">
                    â„¹ï¸ å…³äºæ¸¸æˆ
                </button>
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            loadPlayerData();
            setupEventListeners();
        });

        function loadPlayerData() {
            // åŠ è½½ç©å®¶æ•°æ®
            if (typeof WordAdventure !== 'undefined' && WordAdventure.gameState) {
                const player = WordAdventure.gameState.player;
                document.getElementById('player-level').textContent = player.stats.level;
                document.getElementById('words-learned').textContent = player.stats.wordsLearned;
                document.getElementById('streak-days').textContent = player.progress.streak;
                document.getElementById('total-time').textContent = Math.floor(player.progress.totalTime / 60);
                document.getElementById('achievements').textContent = player.achievements.length;
                
                // æ›´æ–°ç»éªŒæ¡
                const currentExp = player.stats.exp;
                const expNeeded = player.stats.level * 100;
                const expPercentage = (currentExp / expNeeded) * 100;
                document.getElementById('exp-fill').style.width = `${expPercentage}%`;
                
                // åŠ è½½æˆå°±
                loadAchievements();
                
                // åŠ è½½è®¾ç½®
                loadSettings();
            }
        }

        function loadAchievements() {
            const grid = document.getElementById('achievements-grid');
            const achievements = WordAdventure.gameState.player.achievements || [];
            
            if (achievements.length === 0) {
                grid.innerHTML = '<p class="no-achievements">è¿˜æ²¡æœ‰è·å¾—æˆå°±ï¼Œç»§ç»­åŠªåŠ›ï¼</p>';
            } else {
                grid.innerHTML = achievements.map(achievement => `
                    <div class="achievement-item ${achievement.unlocked ? 'unlocked' : 'locked'}">
                        <div class="achievement-icon">${achievement.icon}</div>
                        <div class="achievement-name">${achievement.name}</div>
                    </div>
                `).join('');
            }
        }

        function loadSettings() {
            const settings = WordAdventure.gameState.settings;
            document.getElementById('sound-toggle').checked = settings.soundEnabled;
            document.getElementById('music-toggle').checked = settings.musicEnabled;
            document.getElementById('notification-toggle').checked = settings.notificationsEnabled;
        }

        function setupEventListeners() {
            // è®¾ç½®åˆ‡æ¢
            document.getElementById('sound-toggle').addEventListener('change', function() {
                if (typeof WordAdventure !== 'undefined') {
                    WordAdventure.gameState.settings.soundEnabled = this.checked;
                    WordAdventure.saveGame();
                }
            });

            document.getElementById('music-toggle').addEventListener('change', function() {
                if (typeof WordAdventure !== 'undefined') {
                    WordAdventure.gameState.settings.musicEnabled = this.checked;
                    WordAdventure.saveGame();
                }
            });

            document.getElementById('notification-toggle').addEventListener('change', function() {
                if (typeof WordAdventure !== 'undefined') {
                    WordAdventure.gameState.settings.notificationsEnabled = this.checked;
                    WordAdventure.saveGame();
                }
            });
        }

        function showParentMode() {
            if (confirm('è¿›å…¥å®¶é•¿æ¨¡å¼éœ€è¦éªŒè¯å¯†ç ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ')) {
                const password = prompt('è¯·è¾“å…¥å®¶é•¿å¯†ç ï¼š');
                if (password === '123456') {
                    alert('å®¶é•¿æ¨¡å¼å·²å¯ç”¨');
                    // è¿™é‡Œå¯ä»¥è·³è½¬åˆ°å®¶é•¿é¡µé¢
                } else {
                    alert('å¯†ç é”™è¯¯');
                }
            }
        }

        function exportProgress() {
            if (typeof WordAdventure !== 'undefined') {
                const data = JSON.stringify(WordAdventure.gameState, null, 2);
                const blob = new Blob([data], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'word-adventure-progress.json';
                a.click();
                URL.revokeObjectURL(url);
            }
        }

        function showAbout() {
            alert('å•è¯å†’é™©å²› v1.0\n\nä¸€æ¬¾ä¸“ä¸ºå°å­¦ç”Ÿè®¾è®¡çš„è‹±è¯­å­¦ä¹ æ¸¸æˆ\nå°†å­¦ä¹ å˜æˆä¸€åœºç²¾å½©çš„å†’é™©ï¼');
        }
    </script>

    <style>
        .profile-page {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .player-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .player-avatar-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .player-avatar-large {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid white;
        }

        .player-info h2 {
            margin: 0 0 10px 0;
            font-size: 24px;
        }

        .player-level-display {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stats-section, .achievements-section, .settings-section, .options-section {
            margin-bottom: 25px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .stat-icon {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: bold;
            margin: 5px 0;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.8;
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .achievement-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .achievement-item.unlocked {
            background: rgba(255, 215, 0, 0.2);
        }

        .achievement-item.locked {
            opacity: 0.5;
        }

        .settings-list {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
            backdrop-filter: blur(10px);
        }

        .setting-item {
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .toggle-switch {
            width: 44px;
            height: 24px;
            background: #ccc;
            border-radius: 12px;
            position: relative;
            transition: background 0.3s;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            background: white;
            border-radius: 50%;
            top: 3px;
            left: 3px;
            transition: transform 0.3s;
        }

        input[type="checkbox"] {
            display: none;
        }

        input[type="checkbox"]:checked + .toggle-switch {
            background: #4CAF50;
        }

        input[type="checkbox"]:checked + .toggle-switch::after {
            transform: translateX(20px);
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 10px;
            padding: 15px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: background 0.3s;
        }

        .option-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .no-achievements {
            text-align: center;
            opacity: 0.7;
            font-style: italic;
        }

        h3 {
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 18px;
        }

        .page-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .back-btn {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 5px;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .page-header h1 {
            margin: 0;
            font-size: 24px;
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .achievements-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</body>
</html>